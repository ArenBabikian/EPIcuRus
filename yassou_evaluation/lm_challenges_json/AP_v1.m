% vardef
% 	ALTMode,Bool,input;
% 	HDGmode,Bool,input;
% 	autopilot_engaged,Bool,input;
% 	altitude,Real,output;
% 	steady_state,Bool,output;
% 	roll_err,Real,output;
% 	roll_cmd,Real,output;
% 	overshoot,Real,output;
% 	abs_roll_rate,Real,output;
% 	abs_roll_angle,Real,output;
% 	hdg_steady_state,Bool,output;
% 	hdg_err,Real,output;
% 	hdg_overshoot,Real,output;
% endvardef
% reqdef
% 	ALTMode, ((altitude-7225.0)<0.0)->(7225.0-altitude)<=35.0 & ((altitude-7225.0)>=0.0)->((altitude-7225.0)<=35.0);
% 	autopilot_engaged & !HDGmode, steady_state -> ((roll_err>=0 -> roll_err<=0.1) & (roll_err<0 ->(-roll_err)<=0.1));
% 	autopilot_engaged & !HDGmode, overshoot <= 0.1;
% 	true, abs_roll_rate <= 6.6;
% 	true, abs_roll_angle < 33.0;
% 	HDGmode, hdg_steady_state -> ((hdg_err>=0.0 -> hdg_err<=1.0) & (hdg_err<0.0 ->(-hdg_err)<=1.0));
% 	HDGmode, hdg_overshoot <= 0.1;
% endreqdef

function data = AP_v1()

data = struct( ...
    'name', 'AP', ...
    'inputs', [ ...
        struct('name','ALTMode','type','Bool'), ...
        struct('name','HDGmode','type','Bool'), ...
        struct('name','autopilot_engaged','type','Bool') ...
    ], ...
    'outputs', [ ...
        struct('name','altitude','type','Real'), ...
        struct('name','steady_state','type','Bool'), ...
        struct('name','roll_err','type','Real'), ...
        struct('name','roll_cmd','type','Real'), ...
        struct('name','overshoot','type','Real'), ...
        struct('name','abs_roll_rate','type','Real'), ...
        struct('name','abs_roll_angle','type','Real'), ...
        struct('name','hdg_steady_state','type','Bool'), ...
        struct('name','hdg_err','type','Real'), ...
        struct('name','hdg_overshoot','type','Real') ...
    ], ...
    'requirements', [ ...
        struct( ...
            'rid', '1', ...
            'precondition', 'ALTMode', ...
            'phi', '((p1 -> p2) & (p3 -> p4))', ...
            'preds', [ ...
                struct('str','p1','A',[1 0 0 0 0 0 0 0 0 0],'b',7225.0), ...
                struct('str','p2','A',[-1 0 0 0 0 0 0 0 0 0],'b',-7190.0), ...
                struct('str','p3','A',[-1 0 0 0 0 0 0 0 0 0],'b',-7225.0), ...
                struct('str','p4','A',[1 0 0 0 0 0 0 0 0 0],'b',7260.0) ...
            ] ...
        ), ...
        struct( ...
            'rid', '2', ...
            'precondition', 'autopilot_engaged & ~HDGmode', ...
            'phi', '(steady_state -> ((p5 -> p6) & (p7 -> p8)))', ...
            'preds', [ ...
                struct('str','p5','A',[0 0 -1 0 0 0 0 0 0 0],'b',0), ... % roll_err>=0
                struct('str','p6','A',[0 0 1 0 0 0 0 0 0 0],'b',0.1), ... % roll_err<=0.1
                struct('str','p7','A',[0 0 1 0 0 0 0 0 0 0],'b',0), ...   % roll_err<=0
                struct('str','p8','A',[0 0 -1 0 0 0 0 0 0 0],'b',0.1) ... % -roll_err<=0.1
            ] ...
        ), ...
        struct( ...
            'rid', '3', ...
            'precondition', 'autopilot_engaged & ~HDGmode', ...
            'phi', 'p9', ...
            'preds', [ ...
                struct('str','p9','A',[0 0 0 0 1 0 0 0 0 0],'b',0.1) ... % overshoot<=0.1
            ] ...
        ), ...
        struct( ...
            'rid', '4', ...
            'precondition', 'true', ...
            'phi', 'p10', ...
            'preds', [ ...
                struct('str','p10','A',[0 0 0 0 0 1 0 0 0 0],'b',6.6) ... % abs_roll_rate<=6.6
            ] ...
        ), ...
        struct( ...
            'rid', '5', ...
            'precondition', 'true', ...
            'phi', 'p11', ...
            'preds', [ ...
                struct('str','p11','A',[0 0 0 0 0 0 1 0 0 0],'b',33.0) ... % abs_roll_angle<33.0
            ] ...
        ), ...
        struct( ...
            'rid', '6', ...
            'precondition', 'HDGmode', ...
            'phi', '(hdg_steady_state -> ((p12 -> p13) & (p14 -> p15)))', ...
            'preds', [ ...
                struct('str','p12','A',[0 0 0 0 0 0 0 0 -1 0],'b',0), ...  % hdg_err>=0.0
                struct('str','p13','A',[0 0 0 0 0 0 0 0 1 0],'b',1.0), ... % hdg_err<=1.0
                struct('str','p14','A',[0 0 0 0 0 0 0 0 1 0],'b',0), ...   % hdg_err<=0
                struct('str','p15','A',[0 0 0 0 0 0 0 0 -1 0],'b',1.0) ... % -hdg_err<=1.0
            ] ...
        ), ...
        struct( ...
            'rid', '7', ...
            'precondition', 'HDGmode', ...
            'phi', 'p16', ...
            'preds', [ ...
                struct('str','p16','A',[0 0 0 0 0 0 0 0 0 1],'b',0.1) ... % hdg_overshoot<=0.1
            ] ...
        ) ...
    ] ...
);

end
